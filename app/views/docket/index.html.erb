<div class="page-header">
	<h1>My Docket</h1>
</div>

<% @days_of_this_week.each do |day| %>
<div class="panel panel-default">
	<div class="panel-heading">
		<b><%= Date::DAYNAMES[day.wday] %></b>, the <b><%= day.mday.ordinalize %></b> of <b><%= Date::MONTHNAMES[day.month] %></b>
	</div>

	<div class="panel-body row">
		<div class="col-md-8">
			<% day_assignments_and_exams = current_user.day_assignments(day) + current_user.day_exams(day) %>
			<% if day_assignments_and_exams.count == 0 %>
				No assignments or exams.
			<% else %>
				<div class="row">
					<% current_user.classes.sort! {|first, last| first.period <=> last.period }.each do |classroom| %>
						<div class="col-md-12">
							<b><%= classroom.course_name %></b>
						</div>
						<div class="col-md-1"></div>
						<div class="col-md-11">
							<% day_things = classroom.day_assignments(day) + classroom.day_exams(day) %>
							<% if day_things.count == 0 %>
								Nothing to do today.
							<% else %>
								<% day_things.each do |day_thing| %>
									<% if day_thing.class == Assignment %>
										Assignment "<%= day_thing.name %>" is due today.
									<% elsif day_thing.class == Exam %>
										Exam "<%= day_thing.name %>" is today.
									<% else %>
										Something bad happened.
									<% end %>
								<% end %>
							<% end %>
						</div>
					<% end %>
				</div>
			<% end %>
		</div>

		<div class="col-md-4">
			<% day_events = current_user.day_events(day) %>
			<% if day_events.count == 0 %>
				No events.
			<% else %>
				<table class="table table-bordered">
					<thead>
						<tr>
							<th>Name</th>
						</tr>
					</thead>
					<tbody>
						<% day_events.each do |event| %>
						<tr>
							<td><%= event.name %></td>
						</tr>
						<% end %>
					</tbody>
				</table>
			<% end %>
		</div>
	</div>
</div>
<% end %>
